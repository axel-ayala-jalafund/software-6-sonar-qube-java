import java.nio.file.Files
import java.nio.file.Paths

gradle.beforeProject { project ->
    def dotenvPath = Paths.get(project.projectDir.toString(), ".env")
    if (Files.exists(dotenvPath)) {
        Properties properties = new Properties()
        dotenvPath.withInputStream { stream ->
            properties.load(stream)
        }
        properties.each { key, value ->
            project.ext[key] = value
        }
    }
}
